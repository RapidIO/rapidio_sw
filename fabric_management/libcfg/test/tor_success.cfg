// TEST SCRIPT: Example of a successful master script which uses
//              all possible parameters/keywords successfully
// Configuration file for Fabric Management Daemon (FMD)
// File names for device directory
DEV_DIR /RIO_SM_DEV_DIR
DEV_DIR_MTX /RIO_SM_DEV_DIR_MUTEX

// Fabric management daemon MPORT information: 
// - Port number 
// - Operating mode (slave/master)
// - Size(s) of deviceIDs for which routing must be configured/learned
// - DestID of the master port.
// - Hopcount of the master port (should always be 255).
MPORT 0 master mem34 dev08 5 255 END
MPORT 1 slave mem50 dev08 50 255 END
MPORT 2 slave mem66 dev08 66 255 END

// Master Fabric Management Daemon configuration
// - Size(s) of device ID (dev8, dev16, dev32)
// - Device ID
// - Channelized Messaging channel number
// 
// If any of the MPORTs above is operating in "master" mode, this selects
// the device ID for the master and the Channelized Messaging number for
// CM Messaging with other daemons.

MASTER_INFO dev08 5 3434

// System Configuration Info
// - Define list of endpoints.  Each endpoint has:
//	- a list of ports with configuration information
// - Define list of switches.  Each switch has:
//	- a list of ports
//	- routing tables.
// - Define connections between switches/endpoints
//
// ENDPOINT <ep_name>
// <ep_name>  : Text string used to identify this endpoint
// PORT <port_num> <comptag> {<devid_sz> <devID> <hopcount>...}
// <port_num> : Endpoint port number
// <comp_tag> : Hexadecimal component tag value for this port number/device
// <max_width>: 4x|2x|1x
// <op width> : 4x|2x|1x
// <baudrate> : 6p25|5p0|3p125|2p5|1p25
// <idle seq> : IDLE1|IDLE2
// <err_mgmt> : EM_OFF|EM_ON   
// List of device IDs for the port:
// <devid_sz> : dev08|dev16|dev32
// <devID>    : decimal value for device ID
// <hopcount> : decimal value for hopcount for maintenance packets
// END        : End of device ID list for this port.
// PEND       : End of port list for this endpoint
// Note: Each PORT can have a device ID for each allowed size
// 
// Note: Device ID is of the form <SW #><Port#>, in hex...

ENDPOINT POW8-1 PORT 0 10012 4x 4x 5p0   IDLE1 EM_ON  dev08 0x12 255 END PEND
ENDPOINT POW8-2 PORT 0 20013 4x 4x 5p0   IDLE1 EM_ON  dev08 0x13 1 END PEND
ENDPOINT POW8-3 PORT 0 30015 4x 4x 5p0   IDLE1 EM_ON  dev08 0x15 1 END PEND
ENDPOINT POW8-4 PORT 0 40016 4x 4x 5p0   IDLE1 EM_ON  dev08 0x16 1 END PEND

// SWITCH <device> <name> <devID> <hc> <ct>
// PORT <#> <max width> <op width> <baudrate> <idle seq> <err_mgmt>
// ROUTING_TABLE <devid_sz>
// DESTID <devid|ep_name.#> <rt_value>
// RANGE <devid> <devid> <rt_value>
// MCMASK <mc_masknum> <portlist>
// <END> 
// Where the terms above are defined as:
// <#>       : port number, 0-17
// <max_widt>: 4x|2x|1x
// <op width>: 4x|2x|1x
// <baudrate>: 6p25|5p0|3p125|2p5|1p25
// <idle seq>: IDLE1|IDLE2
// <err_mgmt>: EM_OFF|EM_ON   
// <devid|ep_name.#> : decimal device identifier value, or
//                     device name and port number.
// <rt_value> : 0 - 17    : Port number
//              <MC xx>   : Multicast Mask number, xx can be 0-39.
//              NEXT_BYTE : Use next byte in deviceID for routing.
//                          Invalid for Dev08 deviceIDs.
//              DEFAULT   : Use default route
//              DROP      : Drop these packets
// <mc_masknum>: decimal number 0 through 39
// <portlist>  : list of port numbers (0-17) in the multicast mask

SWITCH CPS1848 L0_SW1 dev08 0xf1 0 10000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 5p0  IDLE1 EM_ON
PORT  3 4x 4x 5p0  IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 5p0  IDLE1 EM_ON
PORT  6 4x 4x 5p0  IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
PORT  8 4x 4x 6p25 IDLE2 EM_ON
PORT  9 4x 4x 6p25 IDLE2 EM_ON
PORT 10 4x 4x 5p0  IDLE1 EM_ON
PORT 11 4x 4x 5p0  IDLE1 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
DESTID POW8-1.0   2 
DESTID POW8-2.0   3 
DESTID POW8-3.0   5 
DESTID POW8-4.0   6 
DESTID 0x1A      10
DESTID 0x1B      11
ROUTING_TABLE dev08 2      
RANGE 0 0xf7 0
DESTID 0xf8 1
DESTID 0xf9 4
DESTID 0xfa 7
DESTID 0xfb 8
DESTID 0xfc 9
RANGE 0xfd 0xff 0
ROUTING_TABLE dev08 3      
RANGE 0 0xff 1
ROUTING_TABLE dev08 5      
RANGE 0 0xff 4
ROUTING_TABLE dev08 6      
RANGE 0 0xff 7
ROUTING_TABLE dev08 10      
RANGE 0 0xff 8
ROUTING_TABLE dev08 11      
RANGE 0 0xff 9
END

SWITCH CPS1848 L0_SW2 dev08 0x20 2 20000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 5p0  IDLE1 EM_ON
PORT  3 4x 4x 5p0  IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 5p0  IDLE1 EM_ON
PORT  6 4x 4x 5p0  IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
PORT  8 4x 4x 6p25 IDLE2 EM_ON
PORT  9 4x 4x 6p25 IDLE2 EM_ON
PORT 10 4x 4x 5p0  IDLE1 EM_ON
PORT 11 4x 4x 5p0  IDLE1 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
DESTID 0x22       2 
DESTID 0x23       3 
DESTID 0x25       5 
DESTID 0x26       6 
DESTID 0x2A      10
DESTID 0x2B      11
ROUTING_TABLE dev08 2      
RANGE 0 0xff 0
ROUTING_TABLE dev08 3      
RANGE 0 0xff 1
ROUTING_TABLE dev08 5      
RANGE 0 0xff 4
ROUTING_TABLE dev08 6      
RANGE 0 0xff 7
ROUTING_TABLE dev08 10      
RANGE 0 0xff 8
ROUTING_TABLE dev08 11      
RANGE 0 0xff 9
END

SWITCH CPS1848 L0_SW3 dev08 0x30 2 30000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 5p0  IDLE1 EM_ON
PORT  3 4x 4x 5p0  IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 5p0  IDLE1 EM_ON
PORT  6 4x 4x 5p0  IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
PORT  8 4x 4x 6p25 IDLE2 EM_ON
PORT  9 4x 4x 6p25 IDLE2 EM_ON
PORT 10 4x 4x 5p0  IDLE1 EM_ON
PORT 11 4x 4x 5p0  IDLE1 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
DESTID 0x32       2 
DESTID 0x33       3 
DESTID 0x35       5 
DESTID 0x36       6 
DESTID 0x3A      10
DESTID 0x3B      11
ROUTING_TABLE dev08 2      
RANGE 0 0xff 0
ROUTING_TABLE dev08 3      
RANGE 0 0xff 1
ROUTING_TABLE dev08 5      
RANGE 0 0xff 4
ROUTING_TABLE dev08 6      
RANGE 0 0xff 7
ROUTING_TABLE dev08 10      
RANGE 0 0xff 8
ROUTING_TABLE dev08 11      
RANGE 0 0xff 9
END

SWITCH CPS1848 L0_SW4 dev08 0x40 2 40000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 5p0  IDLE1 EM_ON
PORT  3 4x 4x 5p0  IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 5p0  IDLE1 EM_ON
PORT  6 4x 4x 5p0  IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
PORT  8 4x 4x 6p25 IDLE2 EM_ON
PORT  9 4x 4x 6p25 IDLE2 EM_ON
PORT 10 4x 4x 5p0  IDLE1 EM_ON
PORT 11 4x 4x 5p0  IDLE1 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
DESTID 0x42       2 
DESTID 0x43       3 
DESTID 0x45       5 
DESTID 0x46       6 
DESTID 0x4A      10
DESTID 0x4B      11
ROUTING_TABLE dev08 2      
RANGE 0 0xff 0
ROUTING_TABLE dev08 3      
RANGE 0 0xff 1
ROUTING_TABLE dev08 5      
RANGE 0 0xff 4
ROUTING_TABLE dev08 6      
RANGE 0 0xff 7
ROUTING_TABLE dev08 10      
RANGE 0 0xff 8
ROUTING_TABLE dev08 11      
RANGE 0 0xff 9
END

SWITCH CPS1848 L0_SW5 dev08 0x50 2 50000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 5p0  IDLE1 EM_ON
PORT  3 4x 4x 5p0  IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 5p0  IDLE1 EM_ON
PORT  6 4x 4x 5p0  IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
PORT  8 4x 4x 6p25 IDLE2 EM_ON
PORT  9 4x 4x 6p25 IDLE2 EM_ON
PORT 10 4x 4x 5p0  IDLE1 EM_ON
PORT 11 4x 4x 5p0  IDLE1 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
DESTID 0x52       2 
DESTID 0x53       3 
DESTID 0x55       5 
DESTID 0x56       6 
DESTID 0x5A      10
DESTID 0x5B      11
ROUTING_TABLE dev08 2      
RANGE 0 0xff 0
ROUTING_TABLE dev08 3      
RANGE 0 0xff 1
ROUTING_TABLE dev08 5      
RANGE 0 0xff 4
ROUTING_TABLE dev08 6      
RANGE 0 0xff 7
ROUTING_TABLE dev08 10      
RANGE 0 0xff 8
ROUTING_TABLE dev08 11      
RANGE 0 0xff 9
END

SWITCH CPS1848 L0_SW6 dev08 0x60 2 60000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 5p0  IDLE1 EM_ON
PORT  3 4x 4x 5p0  IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 5p0  IDLE1 EM_ON
PORT  6 4x 4x 5p0  IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
PORT  8 4x 4x 6p25 IDLE2 EM_ON
PORT  9 4x 4x 6p25 IDLE2 EM_ON
PORT 10 4x 4x 5p0  IDLE1 EM_ON
PORT 11 4x 4x 5p0  IDLE1 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
DESTID 0x62       2 
DESTID 0x63       3 
DESTID 0x65       5 
DESTID 0x66       6 
DESTID 0x6A      10
DESTID 0x6B      11
ROUTING_TABLE dev08 2      
RANGE 0 0xff 0
ROUTING_TABLE dev08 3      
RANGE 0 0xff 1
ROUTING_TABLE dev08 5      
RANGE 0 0xff 4
ROUTING_TABLE dev08 6      
RANGE 0 0xff 7
ROUTING_TABLE dev08 10      
RANGE 0 0xff 8
ROUTING_TABLE dev08 11      
RANGE 0 0xff 9
END

SWITCH CPS1432 L1_SW7 dev08 0xF7 1 70000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 6p25 IDLE1 EM_ON
PORT  3 4x 4x 6p25 IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 6p25 IDLE1 EM_ON
PORT  6 4x 4x 6p25 IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
RANGE 0x10 0x1F 0
RANGE 0x20 0x2F 1
RANGE 0x30 0x3F 4
RANGE 0x40 0x4F 7
RANGE 0x50 0x5F 8
RANGE 0x60 0x6F 9
END

SWITCH CPS1432 L1_SW8 dev08 0xF8 1 80000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 6p25 IDLE1 EM_ON
PORT  3 4x 4x 6p25 IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 6p25 IDLE1 EM_ON
PORT  6 4x 4x 6p25 IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
RANGE 0x10 0x1F 0
RANGE 0x20 0x2F 1
RANGE 0x30 0x3F 4
RANGE 0x40 0x4F 7
RANGE 0x50 0x5F 8
RANGE 0x60 0x6F 9
END

SWITCH CPS1432 L1_SW9 dev08 0xF9 1 90000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 6p25 IDLE1 EM_ON
PORT  3 4x 4x 6p25 IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 6p25 IDLE1 EM_ON
PORT  6 4x 4x 6p25 IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
RANGE 0x10 0x1F 0
RANGE 0x20 0x2F 1
RANGE 0x30 0x3F 4
RANGE 0x40 0x4F 7
RANGE 0x50 0x5F 8
RANGE 0x60 0x6F 9
END

SWITCH CPS1432 L1_SW10 dev08 0xFA 1 A0000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 6p25 IDLE1 EM_ON
PORT  3 4x 4x 6p25 IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 6p25 IDLE1 EM_ON
PORT  6 4x 4x 6p25 IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
RANGE 0x10 0x1F 0
RANGE 0x20 0x2F 1
RANGE 0x30 0x3F 4
RANGE 0x40 0x4F 7
RANGE 0x50 0x5F 8
RANGE 0x60 0x6F 9
END

SWITCH CPS1432 L1_SW11 dev08 0xFB 1 B0000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 6p25 IDLE1 EM_ON
PORT  3 4x 4x 6p25 IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 6p25 IDLE1 EM_ON
PORT  6 4x 4x 6p25 IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
RANGE 0x10 0x1F 0
RANGE 0x20 0x2F 1
RANGE 0x30 0x3F 4
RANGE 0x40 0x4F 7
RANGE 0x50 0x5F 8
RANGE 0x60 0x6F 9
END

SWITCH CPS1432 L1_SW12 dev08 0xFC 1 C0000
PORT  0 4x 4x 6p25 IDLE2 EM_ON
PORT  1 4x 4x 6p25 IDLE2 EM_ON
PORT  2 4x 4x 6p25 IDLE1 EM_ON
PORT  3 4x 4x 6p25 IDLE1 EM_ON
PORT  4 4x 4x 6p25 IDLE2 EM_ON
PORT  5 4x 4x 6p25 IDLE1 EM_ON
PORT  6 4x 4x 6p25 IDLE1 EM_ON
PORT  7 4x 4x 6p25 IDLE2 EM_ON
ROUTING_TABLE dev08 GLOBAL
DFLTPORT DROP
RANGE 0x10 0x1F 0
RANGE 0x20 0x2F 1
RANGE 0x30 0x3F 4
RANGE 0x40 0x4F 7
RANGE 0x50 0x5F 8
RANGE 0x60 0x6F 9
END

// Connection topology in the fabric.
// CONNECT <device.#> <device.#>
// Where <device.#> can be a switch or an endpoint.
//

CONNECT L0_SW1.2 PWR8-1.0
CONNECT L0_SW1.3 PWR8-2.0
CONNECT L0_SW1.5 PWR8-3.0
CONNECT L0_SW1.6 PWR8-4.0

// Every file must have an "EOF" keyword to indicate end of file.
// This makes it easy to end configuration file processing before the
// actual end of file, allowing additional comments/content to follow.

EOF
